<!DOCTYPE html>
<html lang="en" class="create-question">
<head>
	<meta name="format-detection" content="telphone=no, email=no"/>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<title>新建问题</title>

	<script src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/lib/flexible.js?v=1468570030110"></script>
	<link rel="stylesheet" href="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/lib/frozen.min.css">
	<link rel="stylesheet" href="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/css/community.min.css?v=1468570030110">

	<style>
		body {line-height: 1.5;}
	</style>
</head>
<body>
	<!-- Content Start -->
	<div id="wrapper" data-loading="complate">
		<div class="content">
			<div class="page">
				<form action="">
					<div class="head">问题详情</div>
					<a href="###" class="type">
						<p>问题类型</p>
						<p class="type-text">园林绿化<img src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/images/pSort_detail/arrow_right.png" alt="image"></p>
					</a>
					<div class="title">
						<p class="title_input">
							<span>标题：</span>
							<input id="title" type="text" placeholder="请输入标题" required maxlenth="20">
						</p>
						<p class="tip1">示例：某街道某路段有垃圾暴露长期未清理(20字以内)</p>
					</div>
					<div class="discribe">
						<textarea name="" id="description" placeholder="请输入问题描述(10~150字)" required></textarea>
						<!-- 上传图片 复制以下结构 -->
						<div class="imgs"></div>
						<div class="file-box">
							<input multiple id="file" type="file"/>
							<img src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/images/pSort_detail/pic01.png" alt=""/>
						</div>
						<div class="tip2">
							点击"+"添加照片，点击"x"删除照片
							<span>上传(<i class="zhangshu">0</i> /4)</span>
						</div>
						<!-- 上传图片 复制以上结构 -->
					</div>
					<div class="person_info">
						<p class="item">
							<span>姓名</span>
							<input type="text" placeholder="请输入姓名" id="name" required>
							<img src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/images/pSort_detail/name.png" alt="image">
						</p>
						<p class="item">
							<span>联系方式</span>
							<input type="number" placeholder="请输入联系方式" id="phone" required>
							<img src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/images/pSort_detail/tel.png" alt="image">
						</p>
						<p class="tip3">姓名联系方式将严格保密，仅用于满意度调查</p>
						<p class="item anonymous">
							<span>匿名</span>
							<i class="choose"></i>
						</p>
						<p class="tip3">可在此隐藏微信昵称发布</p>
					</div>
					<div class="submit">
						<input class="lucky-submit" type="submit" value="提交">
					</div>
				</form>
			    <div class="warmtip">
			    	<p>温馨提示</p>
			    	<p>1.上报问题时，详细的问题描述与位置信息可以让我们更及时准确的解决问题。</p>
			    	<p>2.拍摄照片时，要能清晰的反映案件内容的详情，最好能拍摄两张以上的现场图片。</p>
			    </div>
			</div>
		</div>

		<!-- 问题类别 -->
		<div class="question-type">
			<p class="msg">请选择你要上报问题的类别</p>
			<ul class="list">
				<li class="cell" data-id="1" data-intro="市容市貌">
					<img class="thumb" src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/images/pSort_detail/pic_03.png" alt="">
					<div class="wrap">
						<p class="caption">市容市貌</p>
						<p class="intro">暴露垃圾、道路不清洁、占道摆卖、占道广告牌、街头散发小广告等问题。占道广告牌、街头散发小广告等问题。</p>
					</div>
				</li>
				<li class="cell" data-id=2 data-intro="园林绿化">
					<img class="thumb" src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/images/pSort_detail/pic_03.png" alt="">
					<div class="wrap">
						<p class="caption">园林绿化</p>
						<p class="intro">暴露垃圾、道路不清洁、占道摆卖、占道广告牌、街头散发小广告等问题。占道广告牌、街头散发小广告等问题。</p>
					</div>
				</li>
			</ul>
		</div>
	</div>


	
	<!-- Import JS -->
	<script src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/lib/zepto.min.js?v=1468570030110"></script>
	<script src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/lib/frozen.min.js?v=1468570030110"></script>
	<script src="http://cloudliving-img.b0.upaiyun.com/static/Home/Community/lib/extends.js?v=1468570030110"></script>
	<script>
		$(function(){
			var typeBtn = $('.type'),
				type = $('.question-type'),
				typeText = $('.type-text'),
				typeid = 0,    // 默认类型id，

				form = $('form'),
				title = $('#title'),
				description = $('#description'),
				name = $('#name'),
				phone = $('#phone')

			// 选择问题类型
			type.find('.cell').on('tap', function(){
				var text = $(this).attr('data-intro'),
					id = $(this).attr('data-id')

				type.hide()
				typeText.text(text)
				typeid = id
			})
			typeBtn.on('tap', function(){
				type.fadeIn()
				console.log(type)
			})

			// 表单验证
			form.on('submit', function(){
				if (title.val().length > 20) {
					$.tips({content: '标题过长(20字以内)'})
					return
				}
				if (description.val().length > 150 || description.val().length < 10) {
					$.tips({content: '问题描述应为10~150个字符'})
					return
				}
				if (/[^\u4e00-\u9fa5]/.test(name.val()) || name.length == 0) {
					$.tips({content: '请填写中文姓名, 且长度不能为0'})
					return
				}
				if (!(/^1\d{10}$/.test(phone.val())) ) {
					$.tips({content: '请填写11位有效手机号'})
					return
				}
			})
		})


	</script>
	
</body>
</html>